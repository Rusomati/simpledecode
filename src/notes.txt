test limit feature and its effectiveness
and clean up the code
